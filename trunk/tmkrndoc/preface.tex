\chapter{Preface}
\label{s.preface}
\section{Preface to the 7th edition}
This edition documents {\Tm} kernel package version 2.0.
\par
The new version has undergone the largest change thus far; so much
has changed, in fact, that this deserves an increment in the major
version number.
\par
Highlights of the new changes:
\begin{itemize}
\item A new metatype, \defn{class}, has been added. This required
changes in many other places, and made it all the more necessary
to assist code generation with well-chosen template functions.
\item A new set of data structure access functions has been defined.
The old functions are for the moment still supported, but are likely
to be removed in a future version.
\item A number of new service functions have been added to simplify
code requirement analysis and other administration.
\item This manual has been updated to reflect the changes in the
language, and to present the information more clearly.
\item The old C templates have been declared obsolete, and are
not documented any more. Appendix \ref{s.upgrade} lists a few templates and
scripts that can assist in converting code to use the new C template.
\end{itemize}
\begin{flushright}
Delft, 23 July 1997.
\end{flushright}
\section{Preface to the 6th edition}
This edition documents {\Tm} version 34.
\par
There have been lots of changes:
\begin{itemize}
\item The data structure descriptions allow the definition of inheritance
      relations. At the moment none of the standard templates supports
      this, but this may change in future versions.
\item The print optimizer now uses an explicit print state, that must
      be passed to the \verb"print_<type>()" functions.
\item Some of the types in the {\C} support library have been
      renamed to prevent clashes with other libraries. This usually means
      that the names have been prefixed with \verb'tm' or \verb'tm_'.
\item In the template language, there now is a new statement \verb'.redirect'
      that redirects a range of text to a file.
\item In the template language, functions \verb'tmhost' and \verb'tmdate' 
      have been deleted.
\item A number of obsolete functions in the {\C} template \verb'calu', such as
      \verb"ins_<type>_list()", have been deleted.
\item The {\C} templates now require ANSI C.
\item MS-DOS 16-bits code is no longer supported. All traces of `long'
      and `huge' have been removed.
\end{itemize}
\begin{flushright}
Delft, 13 February 1996.
\end{flushright}
\section{Preface to the 5th edition}
This edition documents {\Tm} version 32.
This will probably be the last edition for some time. The new features
of {\Tm} are:
\begin{itemize}
\item Support for nested lists. The parser for data structures has
supported this for some time, but now the text substitution language
and the {\C} templates also support this.
\item The {\C} templates no longer require the specification of
{\tt otherlists}, and will deduce dependencies for all list types,
even for single types that are not defined in the data structure definition
file.
\item The {\C} templates can generate list reversal functions; they
      are called \verb+rev_<type>_list()+ and \verb+reverse_<type>_list()+.
\end{itemize}
Support of nested lists required the introduction of a number of new
{\Tm} text substitution language functions: \verb+mklist+, \verb+stemname+,
\verb+ttypellev+ and \verb+ctypellev+.
\begin{flushright}
Delft, 21 August 1992.
\end{flushright}
\section{Preface to the 4th edition}
This edition documents {\Tm} version 31 and a greatly enhanced version
of the {\C} templates and support library.
New features of {\Tm} are:
\begin{itemize}
\item Macros. 
\item File inclusion in data structure files.
\item Search paths for data structure and template files. If a file with
      a given name can not be opened, {\Tm} will prefix it with
      directory names from its search path, and try to open the
      file with that name.
\item Enlargement of data structures. Once a data structure type is defined,
      subsequent definitions of the same type will enlarge the original
      definition with new constructors, new tuple fields or new constructor
      fields.
\end{itemize}
\par
New features of the {\Tm} {\C} templates and support library:
\begin{itemize}
\item A facility to record the origin of {\Tm} block allocations and
      releases. This way, the origin of pending blocks can be shown.
\item The allocation and freeing routines that are used in {\Tm} templates
      are now available to the user. These functions have two advantages
      over the standard \verb+malloc()+ and friends:
      allocation errors are handled,
      and as much as possible, compiler and \verb+lint+ warnings that
      occur with the use of the normal \verb+malloc()+ are suppressed.
\item Functions for a new primitive type, \verb+symbol+ are 
      provided.
\end{itemize}
\begin{flushright}
Delft, 2 March 1992.
\end{flushright}
\section{Preface to the 3rd edition}
This edition of the {\Tm} manual documents the various additions
to the {\C} templates (including a new template)
and the {\Tm} text substitution language.
Also, a large number of small errors and ambiguities in the manual
have been corrected,
and the description of the {\C} templates has been reorganized.
\begin{flushright}
Delft, 22 May 1991.
\end{flushright}
